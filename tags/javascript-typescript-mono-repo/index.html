<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="chengcheng's blog"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="Sic Parvis Magna" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>javascript, typescript, mono-repo - Sic Parvis Magna</title>
<link rel="stylesheet" href="/css/main.css">
<!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><meta name="generator" content="Hexo 5.2.0"></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">Sic Parvis Magna</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2020-09-18T03:35:53.000Z" class="post__time">September 18, 2020</time><h1 class="post__title"><a href="/2020/09/18/ts-mono-settings/">monorepoåŸºç¡€è®¾ç½®æŒ‡å—</a></h1></header><div class="post__main echo"><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>åœ¨ JS ç¤¾åŒºä¸­ï¼Œå¾ˆå¤šé‡é‡çº§çš„åº“å’Œæ¡†æ¶éƒ½ä½¿ç”¨ mono-repo è¿™ç§å½¢å¼æ¥ç»„ç»‡ä»£ç ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯é¡¹ç›®é€æ¸å¤æ‚ä»¥åçš„ä¸€ä¸ªå¿…ç„¶é€‰æ‹©ã€‚ä» 2017 å¹´å¼€å§‹ï¼Œå…¬å¸ WEB ç›¸å…³é¡¹ç›®çš„ä»£ç ç»„ç»‡æ–¹å¼ä¹Ÿé€æ¸ä»ç”±å•ä¸ªå¯¹é¡¹ç›®ç»„ç»‡æ…¢æ…¢è¿‡æ¸¡åˆ°äº† monorepoã€‚</p>
<p>å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼Œä¸€ä¸ªæ˜¯æ€»ç»“ä¸€ä¸‹è¿™äº›å¹´ç”¨ monorepo çš„å„ç§å‘ä»¥åŠä¸€äº›æ„Ÿå—ï¼Œå¦ä¸€ä¸ªä¹Ÿæ˜¯è®°å½•ä¸€ä¸‹è®¾ç½®çš„è¿‡ç¨‹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒJS ç¤¾åŒºå‘å±•å’Œå˜åŒ–å¾ˆå¿«ï¼Œå°±è¯´ monorepo è¿™ä¸ªäº‹æƒ…ï¼Œ17 å¹´åˆ°ç°åœ¨éšç€å·¥å…·åŠŸèƒ½çš„è¿­ä»£ï¼Œå°±å·²ç»æœ‰äº†ä¸å°‘çš„å˜åŒ–ï¼Œä¸è¿‡ä»¥åå¦‚æœæœ‰ä»€ä¹ˆæ–°çš„ä¸œè¥¿ä¹Ÿä¼šæ›´æ–°åœ¨è¿™é‡Œï¼ˆå¤§æ¦‚ ğŸ˜ ï¼‰ã€‚</p>
<h2 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h2><p>é¦–å…ˆï¼Œmonorepo æ˜¯æœ‰è®¸å¤šä¸åŒçš„æ–¹æ¡ˆçš„ï¼Œå„æ–¹æ¡ˆæœ‰ä¸€äº›ç»†å¾®çš„åŒºåˆ«ï¼Œå…·ä½“ä½“ç°åœ¨å¯¹ä¾èµ–çš„ç®¡ç†ä¸Šã€‚</p>
<p>å¾ˆå¤šæ–‡ç« è®² monorepo éƒ½ä¼šæåˆ°ä¸€ä¸ªå« <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna">lerna</a> çš„å·¥å…·ã€‚lerna åº”è¯¥æ˜¯æ¯”è¾ƒæ—©çš„å¤šé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œå¤šé¡¹ç›®çš„æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒç­‰å„ç§åŠŸèƒ½ã€‚lerna å¯ä»¥æ­é… npmï¼Œä¹Ÿå¯ä»¥æ­é… yarnï¼Œå…¶è‡ªèº«é€šè¿‡ symlinks æ”¯æŒé¡¹ç›®ä¹‹é—´çš„ä»£ç æœ¬åœ°å¤ç”¨ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“æ¯ä¸ª package éƒ½æœ‰è‡ªå·±çš„ä¾èµ–å£°æ˜ï¼Œä¾èµ–å®‰è£…åœ¨ package.json åŒç›®å½•çš„ node_modules ä¸­ã€‚monorepo æœ‰ä¸ªç‰¹ç‚¹æ˜¯åŒ…å«å¤šä¸ª packageï¼Œè€Œä¸” monorepo è‡ªå·±ä¹Ÿæ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒç‰¹æ®Šçš„â€™packageâ€™ï¼ˆæœ‰è‡ªå·±çš„ package.jsonï¼‰ã€‚monorepo ä¾èµ–ç®¡ç†çš„æ ¸å¿ƒå°±æ˜¯å¦‚ä½•ç®¡ç†å„ä¸ª package ä¾èµ–ï¼Œä»¥åŠå¦‚ä½•å®ç°ã€Œæœ¬åœ°å¤ç”¨ã€ã€‚è¿™ä¸ªã€Œæœ¬åœ°å¤ç”¨ã€æŒ‡çš„æ˜¯å„å­é¡¹ç›®ä¹‹é—´å¯ä»¥ç›´æ¥å¼•ç”¨ã€å¤ç”¨ä»£ç ï¼Œè€Œä¸éœ€è¦æŠŠåŒ…å‘å¸ƒåˆ° npmã€‚</p>
<p>æœ€å¼€å§‹ lerna çš„æ–¹æ¡ˆæ¯”è¾ƒç›´æ¥ï¼Œå°±æ˜¯å„ä¸ª package éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ node_modulesï¼Œç„¶å<code>lerna bootstrap</code>å¯ä»¥åˆ†æå„ package ä¹‹é—´çš„æœ¬åœ°ä¾èµ–ï¼Œé€šè¿‡ symlinks è‡ªåŠ¨é“¾æ¥ã€‚è¿™ä¸ªæ–¹æ¡ˆå¥½å¤„æ˜¯ç®€å•ç›´æ¥ï¼Œå¯ä»¥ä¿è¯æ¯ä¸ªåŒ…çš„ä¾èµ–ç›¸äº’ç‹¬ç«‹ï¼ŒåŸºæœ¬ä¸å‡ºå¹ºè›¾å­ã€‚ç„¶è€Œæœ‰ä¸ªé—®é¢˜ï¼šå¾ˆå¤šè¢«é‡å¤ä¾èµ–çš„åŒ…è¢«å®‰è£…å¾ˆå¤šæ¬¡ï¼Œè€Œä¸”è¿™ç§é‡å¤ä¾èµ–ä¼šå¾ˆå¤šã€‚æ¯”å¦‚å‡ ä¹æ‰€æœ‰åŒ…å«ä¸šåŠ¡é€»è¾‘çš„ package å¯èƒ½éƒ½è¦å®‰è£… axiosã€momentjs è¿™ç±»ä¾èµ–ï¼Œç„¶åè¿™ç±»ä¾èµ–ç»§ç»­å¾€ä¸‹ä¼šæœ‰æ›´å¤šçš„é‡å¤ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ lerna åç»­å¢åŠ äº† hoisting çš„åŠŸèƒ½ã€‚æ‰€è°“ã€Œhoistingã€å°±æ˜¯å¯ä»¥æŠŠå„ package é‡å¤çš„ã€Œå…¬å…±ä¾èµ–ã€æå‡åˆ°æ ¹ç›®å½•ã€‚ å¦å¤–ä¸€ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯ <a target="_blank" rel="noopener" href="https://classic.yarnpkg.com/en/docs/workspaces/">yarn-workspace</a>ã€‚ yarn-workspace çš„ hoisting æ›´è¿›ä¸€æ­¥ï¼šä¸ä»…ä»…æ˜¯æŠŠé¡¹ç›®å…±åŒçš„ä¾èµ–ã€Œæå‡ã€åˆ° monorepo rootï¼Œè€Œæ˜¯æ•´ä¸ª repo åªæœ‰æ ¹ç›®å½•æœ‰ node_modulesã€‚åŒæ ·æ˜¯åˆ©ç”¨ symlinksï¼Œyarn-workspace çš„è¿™ç§æ–¹æ¡ˆå¯ä»¥æœ€å¤§é™åº¦çš„å‡å°‘åŒ…çš„é‡å¤å®‰è£…é—®é¢˜ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿä¼šå¯¼è‡´ä¸€äº›åŒ…å·¥ä½œä¸æ­£å¸¸ï¼Œæ‰€ä»¥æœ‰é…å¥—çš„ noHoist é…ç½®ï¼Œå¯ä»¥é€‰æ‹©æ€§çš„æŠŠä¸€äº›åŒ…å®‰è£…åœ¨é¡¹ç›®æœ¬åœ°ï¼Œè¿™é‡Œä¸å±•å¼€ï¼Œè¯¦æƒ…å¯ä»¥å»çœ‹ yarn-workspace çš„æ–‡æ¡£ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼Œ monorepo äº‹å®ä¸Šæœ‰ 4 ç§æ–¹æ¡ˆï¼š</p>
<ul>
<li>lerna + yarn</li>
<li>lerna + npm</li>
<li>yarn-workspace</li>
<li>lerna + yarn-workspace</li>
</ul>
<p>å‰ä¸¤ç§å°±æ˜¯ä½¿ç”¨ lerna æ¥ç®¡ç†ä¾èµ–ï¼ŒåŒ…æ‹¬ hoisting ä¹Ÿæ˜¯ lerna æä¾›ã€‚åä¸¤ç§æ ¸å¿ƒæ˜¯åˆ©ç”¨ yarn-workspace æ¥ç®¡ç†ä¾èµ–ï¼Œlerna åªä½œä¸ºä¸€ç§å¯é€‰çš„å·¥å…·åº“ï¼Œæ–¹ä¾¿å¼€å‘éƒ¨ç½²å„ package ç”¨çš„ï¼Œæœ¬èº«å·²ç»ä¸æ˜¯å¿…é¡»ã€‚</p>
<p>è¿™é‡Œéƒ½æ˜¯ä»¥ç¤¾åŒºç”¨çš„æ¯”è¾ƒå¤šçš„ lerna æ¥è¯´ï¼Œå¦å¤– lerna è¿˜æœ‰ä¸€ä¸ª alternativeï¼š<a target="_blank" rel="noopener" href="https://github.com/boltpkg/bolt">bolt</a> ã€‚ä¸è¿‡æˆ‘æ²¡æœ‰ç”¨è¿‡ï¼Œè°ˆä¸ä¸Šä»€ä¹ˆç»éªŒã€‚Bolt ä»ä½¿ç”¨ç¨‹åº¦ä¸Šæ¥çœ‹å’Œ lerna è¿˜ä¸æ˜¯ä¸€ä¸ªæ•°é‡çº§ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å» <a target="_blank" rel="noopener" href="https://openbase.io/">openbase.io</a> ä¸Šçœ‹ä¸€ä¸‹ã€‚</p>
<p>æˆ‘ä¸ªäººå€¾å‘çš„æ˜¯ç¬¬å››ç§æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯ lerna + yarn-workspaceã€‚ä½¿ç”¨ yarn-workspace æ¥ç®¡ç†ä¾èµ–ï¼Œç„¶åä½¿ç”¨ lerna æä¾›çš„å¾ˆå¤šä¾¿æ·åŠŸèƒ½ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å¯¹å„ç§ä¸åŒçš„æ–¹æ¡ˆåšäº†ä¸€äº›æ€§èƒ½æµ‹è¯•:</p>
<p><a target="_blank" rel="noopener" href="https://doppelmutzi.github.io/monorepo-lerna-yarn-workspaces/">Why Lerna and Yarn Workspaces is a Perfect Match for Building Mono-Repos â€“ A Close Look at Features and Performance</a>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æ¨èçš„ä¹Ÿæ˜¯ lerna + yarn-workspace çš„æ–¹æ¡ˆã€‚</p>
<p>ä½¿ç”¨ yarn-workspace çš„è¯ï¼Œéœ€è¦ä½¿ç”¨çš„æ˜¯ yarn 1.x çš„ã€Œç»å…¸ã€ç‰ˆæœ¬ï¼Œç›®å‰æ¥çœ‹ yarn 2.x çš„åšæ³•å¤ªè¿‡æ¿€è¿›ï¼Œæ‰¹è¯„çš„å£°éŸ³å¾ˆå¤šï¼Œæ€•å‘å¤ªå¤šè¿˜æ˜¯å…ˆè§‚æœ›å§ã€‚</p>
<h2 id="yarn-workspace-lerna-monorepo-å®æ–½"><a href="#yarn-workspace-lerna-monorepo-å®æ–½" class="headerlink" title="yarn-workspace + lerna monorepo å®æ–½"></a>yarn-workspace + lerna monorepo å®æ–½</h2><p>å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œç”±äºé¡¹ç›®é—´å…±äº«çš„ä¾èµ–éƒ½ä¼šè¢«æå‡åˆ° root æˆ–è€…ç›´æ¥å®‰è£…åœ¨ rootï¼ˆæˆ–è€…åƒ yarn-workspace è¿™æ ·å‡ ä¹æ‰€æœ‰ä¾èµ–éƒ½å®‰è£…åœ¨æ ¹ç›®å½•ï¼‰ï¼Œå¯èƒ½å‡ºç°åœ¨æŸäº› package ä¸­ä¸ç”¨å£°æ˜ä¹Ÿèƒ½ç›´æ¥ä½¿ç”¨ä¸€äº›ä¾èµ–ï¼ˆè¿™äº›åŒ…å­˜åœ¨äºå…¶ä»–æŸäº›é¡¹ç›®çš„ä¾èµ–ä¸­ï¼‰ã€‚è¿™äº›åŒ…åœ¨ monorepo ä¸­æµ‹è¯•è¿è¡Œæ­£å¸¸ï¼Œä½†æ˜¯å•ç‹¬æ‰“åŒ…å‘å¸ƒæˆ–è€…éƒ¨ç½²ä»¥åå¯èƒ½ä¼šå‡ºç°æŸä¾èµ–æ‰¾ä¸åˆ°çš„é—®é¢˜ã€‚å®é™…ä½¿ç”¨ä¸­éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œä¸ºäº†å°½é‡é¿å…è¿™ç§é—®é¢˜æ¨èçš„åšæ³•æ˜¯ï¼š</p>
<ul>
<li>åœ¨ workspace root åªå®‰è£…å¼€å‘ç›¸å…³ä¾èµ–ï¼›</li>
<li>ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/benmosher/eslint-plugin-import">eslint-plugin-import</a> çš„ lint è§„åˆ™å¯¹ä¾èµ–è¿›è¡Œæ£€æŸ¥</li>
</ul>
<p>åŒæ—¶ä¹Ÿå› ä¸ºè¿™ä¸ªæœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå„ packages éƒ½éœ€è¦ç”¨åˆ°çš„ä¾èµ–ç›´æ¥å®‰è£…åœ¨ monorepo çš„æ ¹ç›®å½•ï¼Œæ¯”å¦‚ eslintã€babelã€webpack ç­‰å„ç§å¯ä»¥åœ¨å„é¡¹ç›®ä¹‹é—´ã€Œå…±äº«ã€çš„åŸºç¡€å¼€å‘ä¾èµ–ã€‚è¿™æ ·å°±ä¸ç”¨åœ¨æ¯ä¸ªé¡¹ç›®é‡Œéƒ½æŠŠ eslintï¼Œtypescriptï¼Œå„ç§ plugin å•¥çš„æ¥ä¸€éã€‚</p>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>æ–‡ç« æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¥æˆ‘æœ€å¸¸ç”¨å’Œä¹ æƒ¯çš„é…ç½®ä¸ºè“æœ¬ï¼Œåšä¸€ä¸ªå®é™…çš„ä¾‹å­ä¾›å¤§å®¶å‚è€ƒã€‚åŒæ—¶ä¹Ÿç®—æ˜¯ä¸€ä¸ªå¤‡å¿˜å§ã€‚</p>
<p>é¦–å…ˆï¼Œåšä¸€äº›è¯´æ˜ï¼Œåç»­çš„è®¾ç½®ä¼šå’Œè¿™å‡ ä¸ªå‡è®¾ç›¸å…³ï¼š</p>
<ul>
<li>ä½¿ç”¨ vscode ä½œä¸º IDEã€‚</li>
<li>ä½¿ç”¨æœ€æ–°ç‰ˆ typescript ä½œä¸ºä¸»è¦å¼€å‘è¯­è¨€ã€‚</li>
<li>ä½¿ç”¨ eslint æ¥è§„èŒƒé¡¹ç›®çš„ä»£ç é£æ ¼ã€‚</li>
<li>ä½¿ç”¨æ¯”è¾ƒæµè¡Œçš„ airbnb eslint config ä½œä¸ºåŸºç¡€ lint è§„åˆ™ã€‚</li>
<li>ä½¿ç”¨ prettier æ¥å¯¹ä»£ç å’Œå„ç§æºæ–‡ä»¶åšæ ¼å¼åŒ–ï¼Œç»Ÿä¸€é£æ ¼ã€‚</li>
<li>é¡¹ç›®ä¸­ä¼šåŒæ—¶åŒ…å«å‰ç«¯é¡¹ç›®ï¼ˆä»¥ react ç”Ÿæ€ä¸ºä¸»ï¼‰å’Œ nodejs ï¼ˆnode latest LTS - 12.x +ï¼‰çš„é¡¹ç›®ã€‚</li>
<li>ä½¿ç”¨ä¸Šé¢æåˆ°è¿‡çš„ lerna + yarn-workspace ä½œä¸º monorepo æ–¹æ¡ˆã€‚</li>
</ul>
<p>å®‰è£… yarnï¼Œå®‰è£… lernaï¼ˆæ¨èå…¨å±€å®‰è£…ï¼Œè¿è¡Œå°‘æ‰“å‡ ä¸ªå­—ï¼Œå¾ˆæ–¹ä¾¿ï¼‰ï¼Œå®‰è£… vscode å’Œæ’ä»¶è¿™äº›ä¹±ä¸ƒå…«ç³Ÿæœ‰æ‰‹å°±è¡Œçš„å°±ä¸å•°å—¦äº†ã€‚</p>
<h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create monorepo dir</span></span><br><span class="line">mkdir ts-mono</span><br><span class="line"></span><br><span class="line"><span class="comment"># quick init with lerna</span></span><br><span class="line"><span class="built_in">cd</span> ts-mono</span><br><span class="line">lerna init</span><br><span class="line"></span><br><span class="line"><span class="comment"># ignore node_modules, dist, lib director</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\nnode_modules/\ndist/\nlib/&quot;</span> &gt;&gt; .gitignore</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶é¡¹ç›®åŸºæœ¬æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ts-mono</span><br><span class="line">â”œâ”€â”€ lerna.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â””â”€â”€ packages</span><br><span class="line">â””â”€â”€ .gitignore</span><br></pre></td></tr></table></figure>

<h3 id="å¯ç”¨-yarn-ä½œä¸ºåŒ…ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¯ç”¨-yarn-workspace"><a href="#å¯ç”¨-yarn-ä½œä¸ºåŒ…ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¯ç”¨-yarn-workspace" class="headerlink" title="å¯ç”¨ yarn ä½œä¸ºåŒ…ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¯ç”¨ yarn-workspace"></a>å¯ç”¨ yarn ä½œä¸ºåŒ…ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¯ç”¨ yarn-workspace</h3><p>æŒ‰ç…§ lerna æ–‡æ¡£ä¸Šçš„è¯´æ˜ï¼ˆ<a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/blob/ef8380930742eb35bca1034808ceda2909852761/commands/bootstrap/README.md#--use-workspaces">å‚è€ƒ</a>ï¼‰ã€‚æˆ‘ä»¬éœ€è¦åœ¨<code>lerna.json</code>ä¸­æ·»åŠ  <code>npmClient: &quot;yarn&quot;</code> ä»¥åŠ <code>useWorkspaces: true</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€lerna.jsonï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;packages&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;packages/*&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;npmClient&quot;</span>: <span class="string">&quot;yarn&quot;</span>,</span><br><span class="line">  <span class="string">&quot;useWorkspaces&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.0.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§ yarn-workspace æ–‡æ¡£ä¸Šçš„è¯´æ˜ï¼ˆ<a target="_blank" rel="noopener" href="https://classic.yarnpkg.com/en/docs/workspaces/#toc-how-to-use-it">å‚è€ƒ</a>ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ monorepo æ ¹ç›®å½•ä¸‹çš„ package.json é‡Œå¢åŠ ã€Œworkspacesã€çš„ç›¸å…³é…ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># package.json</span></span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">      <span class="string">&quot;workspaces&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;packages&quot;</span>: [ <span class="string">&quot;packages/*&quot;</span> ],</span><br><span class="line">          <span class="string">&quot;nohoist&quot;</span>: []</span><br><span class="line">       &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å†™æ³•å·²ç»è€ƒè™‘äº† nohoist çš„åœºæ™¯ï¼Œæ‰€ä»¥å’Œæœ€ç®€å•çš„æƒ…å½¢ä¸å¤ªä¸€æ ·ï¼ˆ<code>workspaces: [&quot;packages/*&quot;]</code>ï¼‰ï¼Œè¿™é‡Œçš„ nohoist ä¸Šé¢æåˆ°è¿‡ï¼Œç›®å‰å¯ä»¥ä¸ç”¨ç®¡ï¼Œä¸è¿‡ç›¸ä¿¡ä»¥åä½ ä¼šç”¨åˆ°:Pã€‚</p>
<h3 id="å®‰è£…-VSCode-æ’ä»¶ï¼Œé…ç½®-editorconfig-prettier"><a href="#å®‰è£…-VSCode-æ’ä»¶ï¼Œé…ç½®-editorconfig-prettier" class="headerlink" title="å®‰è£… VSCode æ’ä»¶ï¼Œé…ç½® editorconfig, prettier"></a>å®‰è£… VSCode æ’ä»¶ï¼Œé…ç½® editorconfig, prettier</h3><p>åŸºäºå‰è¿°å‡è®¾ï¼Œæ¨èå®‰è£… vscode çš„å‡ ä¸ªæ’ä»¶ï¼š</p>
<ul>
<li>dbaeumer.vscode-eslint<ul>
<li>å¯ä»¥åœ¨ vscode ä¸­æ˜¾ç¤º lint é”™è¯¯</li>
</ul>
</li>
<li>esbenp.prettier-vscode<ul>
<li>å¯ä»¥é€šè¿‡ <code>format document</code>å‘½ä»¤æˆ–è€…ä¿å­˜çš„æ—¶å€™è‡ªåŠ¨å¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–</li>
</ul>
</li>
<li>editorconfig.editorconfig<ul>
<li>è¦†ç›–ç”¨æˆ·çš„ç¼–è¾‘å™¨è®¾å®šï¼Œå¯¹æºä»£ç æ–‡ä»¶å’Œå…¶ä»–å„ç§ç±»å‹çš„æ–‡ä»¶åšä¸€ä¸ª indentã€max line ç­‰çš„åŸºç¡€è®¾ç½®</li>
</ul>
</li>
</ul>
<p><strong>é…ç½® editorconfig</strong></p>
<p>äº monorepo æ ¹ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶ <code>.editorconfig</code>ï¼Œ editorconfig æ’ä»¶ä¼šè¯»å–è¯¥æ–‡ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># file: .editorconfig</span></span><br><span class="line">root = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset = utf-8</span><br><span class="line">end_of_line = lf</span><br><span class="line">indent_style = space</span><br><span class="line">insert_final_newline = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[*.&#123;js,jsx,ts,tsx,es6,sh,rb&#125;]</span><br><span class="line">indent_size = 2</span><br><span class="line">max_line_length = 80</span><br><span class="line">trim_trailing_whitespace = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[*.&#123;py&#125;]</span><br><span class="line">indent_size = 4</span><br><span class="line">max_line_length = 80</span><br><span class="line">trim_trailing_whitespace = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[*.&#123;css,scss,less,html,json,yml,yaml&#125;]</span><br><span class="line">indent_size = 2</span><br><span class="line">trim_trailing_whitespace = <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>é…ç½® prettier</strong></p>
<p>åœ¨ monorepo æ ¹ç›®å½•ä¸‹åˆ›å»º <code>prettier.config.js</code>æ–‡ä»¶ï¼Œprettier æ’ä»¶ä¼šè¯»å–è¯¥é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  printWidth: <span class="number">100</span>,</span><br><span class="line">  singleQuote: <span class="literal">true</span>,</span><br><span class="line">  trailingComma: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ prettier æ’ä»¶ç›®å‰æ˜¯ä¸éœ€è¦ä½ åœ¨é¡¹ç›®ä¸­å®‰è£… prettier ä½œä¸ºå¼€å‘ä¾èµ–çš„ï¼Œåº”è¯¥æ˜¯è‡ªå¸¦äº†ã€‚</p>
<h3 id="é…ç½®-typescript"><a href="#é…ç½®-typescript" class="headerlink" title="é…ç½® typescript"></a>é…ç½® typescript</h3><p>æ¥ä¸‹æ¥åº”è¯¥æ˜¯é…ç½® eslintï¼Œç„¶è€Œé…ç½® eslint ä¹‹å‰éœ€è¦å…ˆé…ç½®ä¸€ä¸‹ typescriptï¼Œå› ä¸ºæˆ‘ä»¬ä¸»å¼€å‘è¯­è¨€æ˜¯ typescriptï¼Œæ‰€ä»¥éœ€è¦æ›¿æ¢ eslint çš„ parserï¼Œts çš„ parser ä¾èµ– typescriptï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠ monorepo çš„ ts å…ˆé…ç½®å¥½ã€‚</p>
<p>typescript é…ç½® tsconfig.json å¯ä»¥ç›´æ¥ç”¨ tsc ç”Ÿæˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in ts-mono/</span></span><br><span class="line">yarn add -D typescript</span><br><span class="line"></span><br><span class="line">tsc --init</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æ²¡æœ‰å…¨å±€å®‰è£… tscï¼Œéœ€è¦æ¢æˆ<code>npx tsc</code>ã€‚</p>
<p>æˆ‘ä»¬çš„æ€è·¯æ˜¯åœ¨ monorepo çš„æ ¹ç›®å½•ä¸‹ä¸¢ä¸€ä¸ª tsconfig.jsonï¼Œç„¶å packages/ä¸‹é¢çš„å…¶ä»– package ä¼šæœ‰è‡ªå·±çš„ tsconfig.json,ç„¶å extends monorepo æ ¹ç›®å½•ä¸‹çš„è¿™ä¸ªé…ç½®ã€‚ç”±äºå„ package éƒ½ä¼šæœ‰è‡ªå·±çš„ tsconfigï¼Œæ‰€ä»¥æ ¹ç›®å½•ä¸‹çš„ tsconfig åªæ˜¯å®šä¸ªè°ƒï¼Œä¸éœ€è¦ç‰¹åˆ«çº ç»“ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// node 12 =&gt; ES2019</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;ES2019&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;esnext&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lib&quot;</span>: [<span class="string">&quot;ESNext&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;strict&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;paths&quot;</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class="literal">true</span> <span class="comment">/* Disallow inconsistently-cased references to the same file. */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>tsconfig ä¸»è¦è¿˜æ˜¯éœ€è¦å‚è€ƒ typescript å®˜æ–¹çš„<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/tsconfig">é…ç½®è¯´æ˜æ–‡æ¡£</a>ï¼Œè¿™é‡Œé¢<code>skipLibCheck</code>, <code>strict</code>, <code>esModuleInterop</code>, <code>forceConsistentCasingInFileNames</code> æ˜¯æ¯”è¾ƒå…³é”®çš„é…ç½®å‹ã€‚</p>
<h3 id="é…ç½®-eslint"><a href="#é…ç½®-eslint" class="headerlink" title="é…ç½® eslint"></a><strong>é…ç½® eslint</strong></h3><p>editorconfig å’Œ prettier çš„é…ç½®ç®€å•ç›´æ¥ï¼Œç„¶è€Œ eslint å°±æ²¡é‚£ä¹ˆçœå¿ƒäº†ï¼Œå€¼å¾—å•ç‹¬æ‹‰å‡ºæ¥å¤šè¯´å‡ å¥ã€‚eslint åœ¨ä½¿ç”¨çš„æ—¶å€™ç¢°åˆ°è¿‡ä¸å°‘é—®é¢˜ï¼Œæ€»ç»“å‡ºå‡ ç‚¹éœ€è¦æ³¨æ„çš„ï¼š</p>
<ol>
<li>vscode-eslint å’Œ prettier æ’ä»¶ä¸ä¸€æ ·ï¼šprettier æ’ä»¶è£…å®Œåå¯ä»¥ä½œä¸º IDE åŠŸèƒ½ç›´æ¥ä½¿ç”¨ï¼Œeslint æ’ä»¶éœ€è¦è‡ªå·±å®‰è£… eslint ä¾èµ–ï¼Œeslint æ’ä»¶è¯´è‡ªå·±ä¼šå°è¯•å¯»æ‰¾ä½¿ç”¨ä½ å®‰è£…çš„ eslintã€‚</li>
<li><strong>ä¸æ¨è</strong>å…¨å±€å®‰è£… eslintï¼Œ vscode-eslint æ’ä»¶åœ¨æ–‡æ¡£ä¸­å£°æ˜ä¼šä¼˜å…ˆä½¿ç”¨ä½ æœ¬åœ°çš„ eslintã€‚è¿™æ ·æœ‰ä¸ªå¥½å¤„æ˜¯å‡ºäº†é—®é¢˜æ¯”è¾ƒå®¹æ˜“å®šä½ã€‚æ¨èæŠŠ eslint ä½œä¸ºå¼€å‘ä¾èµ–ç›´æ¥å®‰è£…åœ¨ monorepo çš„æ ¹ç›®å½•ï¼Œå› ä¸ºæ‰€æœ‰é¡¹ç›®éƒ½éœ€è¦ã€‚</li>
<li>å¦‚æœä½¿ç”¨ typescriptï¼Œéœ€è¦<code>@typescript-eslint/parser</code>æ¥æŠŠ ts ä»£ç è§£ææˆ astï¼ŒåŒæ—¶å»ºè®®å®‰è£…<code>@typescript-eslint/eslint-plugin</code>ï¼ŒåŒ…å«äº†ä¸€äº› ts è¯­è¨€é™å®šçš„è§„åˆ™ã€‚</li>
<li>prettier å’Œ eslint çš„è§„åˆ™å¯èƒ½ä¼š<strong>äº’ç›¸å†²çª</strong>ã€‚ prettier æ¨èçš„åšæ³•æ˜¯ä½¿ç”¨ä»–ä»¬æä¾›çš„ eslint é…ç½®ï¼Œè¿™ä¸ªé…ç½®ä¼šå…³æ‰æ‰€æœ‰è·Ÿ format ç›¸å…³çš„è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯ç”± prettier æ¥å¤æ‚ä»£ç æ ¼å¼ç»Ÿä¸€çš„é—®é¢˜ï¼ˆformatterï¼‰ï¼Œeslint åˆ™ä¸»è¦æ£€æŸ¥ä»£ç çš„å†™æ³•ï¼ˆlinterï¼‰ã€‚ç°åœ¨æ¯”è¾ƒæ–°çš„è¯­è¨€å¦‚ goã€rust åŸºæœ¬éƒ½è‡ªå¸¦ formatter äº†ï¼Œä¸åƒ JS å‘æŒ¥ç©ºé—´è¿™ä¹ˆå¤§â€¦â€¦</li>
<li>ç”±äºè¯­è¨€ç›¸åŒï¼Œmonorepo ä¸­çš„å„ package çš„ eslint é…ç½®å¤šå¤šå°‘å°‘éƒ½æ˜¯æœ‰ç›¸ä¼¼çš„ã€‚ä½†æ˜¯å…·ä½“åˆ°ä¸åŒçš„é¡¹ç›®ï¼Œåˆä¼šæœ‰å¾ˆå¤šå·®åˆ«ã€‚æ¯”å¦‚å®¢æˆ·ç«¯é¡¹ç›®éœ€è¦ react ç›¸å…³çš„æ’ä»¶å’Œè§„åˆ™ï¼Œåç«¯é¡¹ç›®åˆ™å®Œå…¨ä¸éœ€è¦ã€‚è§£å†³è¿™ç§ eslint é…ç½®ã€Œå…±äº«ã€çš„é—®é¢˜ï¼Œæœ‰ä¸¤ç§æ€è·¯ï¼š<ul>
<li>ç¬¬ä¸€ç§å°±æ˜¯ã€Œ<a target="_blank" rel="noopener" href="https://eslint.org/docs/user-guide/configuring#configuration-cascading-and-hierarchy">Configuration Cascading and Hierarchy</a>ã€ï¼Œä¹Ÿå°±æ˜¯ Cascadingï¼šçˆ¶ç›®å½•æ”¾ä¸€ä¸ª eslintrc,å­ç›®å½•æ”¾ä¸€ä¸ª eslintrcï¼Œåœ¨ lint å­ç›®å½•çš„æ—¶å€™ eslint ä¼šã€Œåˆå¹¶ã€ä¸¤ä¸ªé…ç½®ã€‚<br>è¿™ä¸ªæ–¹å¼å®é™…ä½¿ç”¨çš„æ—¶å€™å¹¶æ²¡æœ‰é‚£ä¹ˆçµæ´»ï¼Œè€Œä¸” vscode-eslint æ’ä»¶å¯¹å…¶æ”¯æŒçš„ä¸æ˜¯å¾ˆå¥½ï¼Œå¯¹äºæ¯”è¾ƒå¤æ‚çš„ç»“æ„è¿˜éœ€è¦é…ç½®<code>workingDirectories</code>ï¼Œå®é™…ä½¿ç”¨å‘ç°æœ¬æ¥æ­£å¸¸å·¥ä½œçš„ eslint ä¼šçªç„¶è«åå…¶å¦™çš„åœ¨æŸä¸ªé¡¹ç›®çªç„¶å¤±æ•ˆâ€¦â€¦</li>
<li>ç¬¬äºŒç§åˆ™æ˜¯æŒ‰ç…§ Eslint æ¨èçš„ã€Œ<a target="_blank" rel="noopener" href="https://eslint.org/docs/developer-guide/shareable-configs">Shareable Configs</a>ã€ï¼Œè§£é‡Šä¸€ä¸‹å°±æ˜¯ï¼šå‘å¸ƒä¸€ä¸ª eslint-configï¼Œé‡Œé¢åŒ…å«å„ç±»è§„åˆ™ï¼Œç„¶ååœ¨å…¶ä»–é¡¹ç›®é‡Œç›´æ¥ extends å³å¯ã€‚<br>ç”±äºæˆ‘ä»¬ä½¿ç”¨ monorepoï¼Œæ‰€ä»¥è¿™ä¸ªé…ç½®é¡¹ç›®å¯ä»¥æ˜¯ä¸€ä¸ªå•ç‹¬çš„ packageï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰å¿…è¦å‘å¸ƒåˆ° npmï¼Œç›´æ¥æœ¬åœ°ä¾èµ–å³å¯ï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥é’ˆå¯¹ react é¡¹ç›®ã€nodejs é¡¹ç›®å®šåˆ¶ä¸åŒçš„è§„åˆ™ï¼Œå„ pacakge åœ¨ä½¿ç”¨æ—¶è¿˜å¯ä»¥å†ä¿®æ”¹å®šåˆ¶ã€‚æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èè¿™ç§æ–¹å¼ï¼Œè™½ç„¶çœ‹èµ·æ¥å¯èƒ½ä¼šéº»çƒ¦ä¸€äº›ï¼Œä½†æ˜¯åç»­æ‰©å±•èµ·æ¥ä¸å®¹æ˜“å‡ºé—®é¢˜ã€‚</li>
</ul>
</li>
</ol>
<p>ä¸Šé¢è¯´è¿‡æ¨èä½¿ç”¨<code>airbnb</code>çš„è§„åˆ™ä½œä¸ºåŸºç¡€ã€‚airbnb çš„ eslint é…ç½®å¹¶æ²¡æœ‰ typescript ç‰ˆæœ¬ï¼Œæ‰€ä»¥ç”¨çš„æ˜¯ç¤¾åŒºçš„ï¼š<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/eslint-config-airbnb-typescript">eslint-config-airbnb-typescript</a></p>
<p>ç„¶å eslint-config-airbnb æœ¬èº«ä¾èµ–ï¼š</p>
<ul>
<li><code>eslint-plugin-import</code>, ä¸Šé¢æåˆ°è¿‡è¿™ä¸ªæ’ä»¶</li>
<li><code>eslint-plugin-jsx-a11y</code>ï¼Œè·Ÿ acc ç›¸å…³çš„ï¼Œå›½å†…å¯èƒ½ä¸å¤ªåœ¨æ„ï¼Œä¸è¿‡å±äº peer dependenciesï¼Œè¿˜æ˜¯è£…äº†å§ã€‚</li>
<li><code>eslint-plugin-react</code></li>
<li><code>eslint-plugin-react-hooks</code></li>
</ul>
<p>ä»¥åŠæˆ‘ä»¬ä¸Šè¿°æè¿‡çš„ï¼Œä¸ºäº†æ”¯æŒ typescript å¿…é¡»å®‰è£…çš„</p>
<ul>
<li><code>@typescript-eslint/parser</code></li>
<li><code>@typescript-eslint/eslint-plugin</code></li>
</ul>
<p>ä»¥åŠæˆ‘ä»¬ä¸Šè¿°æè¿‡çš„ï¼Œä¸ºäº†è§£å†³ prettier å’Œ eslint rules ä¹‹é—´å¯èƒ½å†²çªé—®é¢˜çš„</p>
<ul>
<li><code>eslint-config-prettier</code></li>
</ul>
<p><strong>å®‰è£… eslint ç›¸å…³ä¾èµ–</strong></p>
<p>ä¸Šé¢ä¹Ÿè¯´è¿‡æ¨èåœ¨æ ¹ç›®å½•å®‰è£… eslint ç›¸å…³ä¾èµ–ï¼Œæ‰€ä»¥æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨ root æ ¹ç›®å½•ä¸‹æ‰§è¡Œ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in ts-mono/</span></span><br><span class="line">yarn add -WD eslint eslint-config-airbnb-typescript \</span><br><span class="line">    eslint-config-airbnb-typescript \</span><br><span class="line">    eslint-config-prettier \</span><br><span class="line">    eslint-plugin-import \</span><br><span class="line">    eslint-plugin-jsx-a11y \</span><br><span class="line">    eslint-plugin-react \</span><br><span class="line">    eslint-plugin-react-hooks \</span><br><span class="line">    @typescript-eslint/eslint-plugin \</span><br><span class="line">    @typescript-eslint/parser</span><br><span class="line"></span><br><span class="line">touch .eslintignore</span><br></pre></td></tr></table></figure>

<p><strong>åˆ›å»ºä¸€ä¸ª eslint-config package</strong><br>ä¸€èˆ¬æˆ‘ä»¬åœ¨ monorepo é‡Œæ–°å»ºä¸€ä¸ª packageï¼Œå¯ä»¥ç”¨<code>lerna create</code>æ¥å¿«é€Ÿç”Ÿæˆï¼Œä¸è¿‡ lerna é»˜è®¤ç”Ÿæˆå‘å¸ƒåˆ° npm çš„ packageï¼Œæœ‰å¾ˆå¤šéœ€è¦æ”¹çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç®€å•ç‚¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in /ts-mono</span></span><br><span class="line"><span class="built_in">cd</span> packages</span><br><span class="line"><span class="comment"># in /ts-mono/packages</span></span><br><span class="line">mkdir eslint-config &amp;&amp; <span class="built_in">cd</span> eslint-config</span><br><span class="line"><span class="comment"># in /ts-mono/packages/eslint-config</span></span><br><span class="line">yarn init -y</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">touch base.js react.js node.js</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œç¨å¾®è°ƒæ•´ä¸€ä¸‹ï¼ŒæŠŠ main å…¥å£æ”¹æˆ base.jsï¼Œå¦å¤–æŠŠåŒ…åæ”¹æˆ<code>@flip/eslint-config</code>ã€‚å½“ç„¶è¿™é‡Œçš„ scope è‡ªå·±æ›¿æ¢æˆåˆ«çš„ã€‚å¦‚æœä¸åŠ  scopeï¼ŒæŒ‰ç…§ eslint çš„å‘½åè§„èŒƒï¼Œpackage åº”è¯¥å«<code>eslint-config-yourcomp</code>ä¹‹ç±»çš„æ›´ç¬¦åˆè§„èŒƒã€‚</p>
<p>è¿™äº›é…ç½®éƒ½æ¯”è¾ƒç®€å•ï¼Œä¸ç”¨ä¸Š tsï¼Œç›´æ¥ç”¨ js å°±è¡Œï¼Œæ•´ä¸ª package åŒ…å«ä¸‰ä¸ªæ–‡ä»¶ï¼š<code>base.js</code>å†™æœ€åŸºç¡€çš„ eslint é…ç½®ï¼Œç„¶åå†™ä¸€ä¸ªå‰ç«¯é¡¹ç›®ä¸“ç”¨çš„é…ç½®<code>react.js</code>ï¼Œä¸€ä¸ªåç«¯é¡¹ç›®ç”¨çš„é…ç½®<code>node.js</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ts-mono</span><br><span class="line">â”œâ”€â”€ .editorconfig</span><br><span class="line">â”œâ”€â”€ .eslintignore</span><br><span class="line">â”œâ”€â”€ .gitignore</span><br><span class="line">â”œâ”€â”€ lerna.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ packages</span><br><span class="line">â”‚Â Â  â””â”€â”€ eslint-config</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ base.js</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ node.js</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ package.json</span><br><span class="line">â”‚Â Â      â””â”€â”€ react.js</span><br><span class="line">â”œâ”€â”€ prettier.config.js</span><br><span class="line">â””â”€â”€ yarn.lock</span><br><span class="line"></span><br><span class="line">2 directories, 11 files</span><br></pre></td></tr></table></figure>

<p><strong>ç¼–å†™åŸºç¡€é…ç½® base.js</strong></p>
<p>è¿™ä¸ª eslint çš„å†™æ³•å’Œè‡ªå·±å®é™…é¡¹ç›®éœ€æ±‚æœ‰å…³ï¼Œ eslint é…ç½®è¿˜è¯·å¤§å®¶é˜…è¯» eslint è‡ªèº«çš„æ–‡æ¡£ï¼Œè¿™é‡Œé¢åˆ—å‡ ä¸ªè¦ç‚¹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå‚è€ƒã€‚</p>
<ul>
<li>ç”±äºä¸»è¯­è¨€æ˜¯ typescriptï¼Œæ‰€ä»¥ parser éœ€è¦æ›¿æ¢ä¸º<code>@typescript-eslint/parser</code></li>
<li>parserOptions.ecmaVersion æŒ‰ç…§éœ€è¦è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚<code>2020</code></li>
<li>extends éœ€è¦ä¾æ¬¡ç»§æ‰¿:<code>airbnb-typescript</code>ã€<code>prettier</code>æ¥è§£å†³å‰é¢è¯´è¿‡çš„å†²çªã€‚</li>
<li>plugins éœ€è¦åŒ…å«å‰é¢æè¿‡çš„<code>@typescript-eslint/eslint-plugin</code>, <code>eslint-plugin-import</code>ã€‚</li>
</ul>
<p>è¿™é‡Œç»™ä¸€ä¸ªåŸºäº airbnb-typescript è§„åˆ™çš„å‚è€ƒï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  parser: <span class="string">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: <span class="number">2020</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">extends</span>: [</span><br><span class="line">    <span class="comment">// recommended by &#x27;eslint-plugin-import</span></span><br><span class="line">    <span class="string">&quot;plugin:import/recommended&quot;</span>,</span><br><span class="line">    <span class="string">&quot;plugin:import/typescript&quot;</span>,</span><br><span class="line">    <span class="comment">// preferred eslint config base</span></span><br><span class="line">    <span class="string">&quot;airbnb-typescript&quot;</span>,</span><br><span class="line">    <span class="comment">// prevent format rules conflict</span></span><br><span class="line">    <span class="string">&quot;prettier&quot;</span>,</span><br><span class="line">  ],</span><br><span class="line">  settings: &#123;&#125;,</span><br><span class="line">  <span class="comment">// leave the plugins to the package level settings</span></span><br><span class="line">  plugins: [<span class="string">&quot;import&quot;</span>, <span class="string">&quot;@typescript-eslint&quot;</span>],</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="comment">// prefer named export!</span></span><br><span class="line">    <span class="string">&quot;import/prefer-default-export&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// just as bad as &quot;max components per file&quot;</span></span><br><span class="line">    <span class="comment">// &quot;max-classes-per-file&quot;: &quot;off&quot;,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Missing yarn workspace support</span></span><br><span class="line">    <span class="string">&quot;import/no-extraneous-dependencies&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘ä»¬å…ˆæ³¨é‡Šæ‰<code>max-classes-per-file</code>è¿™æ¡è§„åˆ™ï¼Œæ–¹ä¾¿æ¥ä¸‹æ¥çš„æµ‹è¯•ã€‚</p>
<p><strong>æµ‹è¯• base.js é…ç½®</strong></p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª nodejs çš„ packageï¼Œæ•…æ„å†™ä¸€ä¸ªè¿åè§„åˆ™çš„ä»£ç æ–‡ä»¶ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„é…ç½®æ¥æ£€æŸ¥ä»£ç ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in ts-mono/packages</span></span><br><span class="line">mkdir proj-a &amp;&amp; <span class="built_in">cd</span> proj-a</span><br><span class="line"><span class="comment"># in ts-mono/packages/proj-a</span></span><br><span class="line">yarn init -y &amp;&amp; mkdir src &amp;&amp; touch src/index.ts &amp;&amp; touch tsconfig.json &amp;&amp; touch .eslintrc.js</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨çš„ä¿®æ”¹ä¸€ä¸‹ package.jsonï¼ŒåŠ å…¥ä¸€ä¸ªæœ¬åœ°å¼€å‘ä¾èµ–ï¼šæˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„<code>@flip/eslint-config</code>ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json for &#x27;proj-a&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;proj-a&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;@flip/eslint-config&quot;</span>: <span class="string">&quot;*&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;MIT&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ monorepo çš„ç»“æ„å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ts-mono</span><br><span class="line">â”œâ”€â”€ .editorconfig</span><br><span class="line">â”œâ”€â”€ .eslintignore</span><br><span class="line">â”œâ”€â”€ .gitignore</span><br><span class="line">â”œâ”€â”€ lerna.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ packages</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ eslint-config</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ base.js</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ node.js</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ package.json</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ react.js</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ yarn.lock</span><br><span class="line">â”‚Â Â  â””â”€â”€ proj-a</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ .eslintrc.js</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ package.json</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â      â””â”€â”€ tsconfig.json</span><br><span class="line">â”œâ”€â”€ prettier.config.js</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br><span class="line"></span><br><span class="line">4 directories, 17 files</span><br></pre></td></tr></table></figure>

<p>proj-a çš„ eslint é…ç½®å¦‚ä¸‹ï¼ˆç»§æ‰¿@flip/eslint-configï¼‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="keyword">extends</span>: [<span class="string">&quot;@flip/eslint-config&quot;</span>],</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    project: <span class="string">&quot;./tsconfig.json&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ä¸€ä¸‹ç”±äºæˆ‘ä»¬ä½¿ç”¨@typescript-eslint/parser, è¿™é‡Œçš„<code>parserOptions</code>æ˜¯å¿…é¡»è®¾ç½®çš„ã€‚</p>
<p>proj-a çš„ tsconfig é…ç½®å¦‚ä¸‹ï¼ˆç»§æ‰¿ monorepo æ ¹ç›®å½•ä¸‹çš„ tsconfigï¼‰ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;extends&quot;</span>: <span class="string">&quot;../../tsconfig.json&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨ proj-a ä¸­æ•…æ„å†™ä¸€ä¸ªè¿èƒŒä¸Šé¢æåˆ°çš„<code>max-classes-per-file</code>è§„åˆ™çš„ä»£ç â€¦â€¦</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœé…ç½®æ­£å¸¸ï¼Œvscode åº”è¯¥æ˜¯èƒ½å¤Ÿæ­£å¸¸ååº”å‡º lint é”™è¯¯ï¼š<br><img src="./lint-error.png" alt="lint-error"></p>
<p>å¦‚æœæ²¡æœ‰æ­£å¸¸æ˜¾ç¤ºï¼Œæ£€æŸ¥ä¸€ä¸‹ Eslint çš„è¾“å‡ºï¼ˆå¯ä»¥ä½¿ç”¨ vscode å‘½ä»¤ï¼šEslint: Show Output Channelï¼‰çœ‹çœ‹æœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p>æ¥ä¸‹æ¥å¯ä»¥å»<code>eslint-config</code>é¡¹ç›®ï¼ŒæŠŠ<code>base.js</code>é‡Œ<code>max-classes-per-file</code>è§„åˆ™çš„æ³¨é‡Šé‡æ–°æ‰“å¼€ï¼Œproj-a é¡¹ç›®ä¸­çš„ lint æŠ¥é”™å°±æ¶ˆé™¤ï¼ˆä¿®æ”¹äº† eslint é¡¹ç›®åå¯èƒ½éœ€è¦é‡å¯ä¸€ä¸‹ vscode å®¢æˆ·ç«¯ï¼Œå…¶å®ç†è®ºä¸Šæ˜¯éœ€è¦é‡å¯ä¸€ä¸‹ eslint çš„æ’ä»¶ï¼Œä½†æ˜¯è¿˜æ²¡æ‰¾åˆ°é‡å¯çš„æ–¹æ³•æ‰€ä»¥ç›´æ¥é‡å¯ vscode ğŸ˜…ï¼‰ã€‚</p>
<p><strong>react ä¸“ç”¨çš„ lint base</strong></p>
<p>react ä¸“ç”¨çš„ eslint é…ç½®ç›´æ¥ç»§æ‰¿æˆ‘ä»¬ä¹‹å‰æµ‹è¯•è¿‡çš„ baseï¼Œç„¶ååŠ ä¸Š react ç›¸å…³çš„æ’ä»¶å’Œé…ç½®ï¼Œç¤ºä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eslint-config/react.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="keyword">extends</span>: [<span class="string">&quot;@flip/eslint-config/base&quot;</span>, <span class="string">&quot;plugin:react-hooks/recommended&quot;</span>],</span><br><span class="line">  plugins: [<span class="string">&quot;react&quot;</span>, <span class="string">&quot;react-hooks&quot;</span>],</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&quot;react/jsx-filename-extension&quot;</span>: [<span class="string">&quot;error&quot;</span>, &#123; <span class="attr">extensions</span>: [<span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.tsx&quot;</span>] &#125;],</span><br><span class="line">    <span class="string">&quot;react/jsx-props-no-spreading&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>nodejs ç¯å¢ƒçš„ lint base</strong></p>
<p>nodejs é¡¹ç›®ç”¨çš„ eslint é…ç½®åŒæ ·æ˜¯ç»§æ‰¿ baseï¼Œæœ€åŸºç¡€çš„åªéœ€è¦ä¸€è¡Œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eslint-config/node.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="keyword">extends</span>: [<span class="string">&quot;@flip/eslint-config/base&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å…·ä½“ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­å·²ç» cover äº†ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š</p>
<ul>
<li>åœ¨é¡¹ç›®ä¸­å£°æ˜ä¾èµ–<code>&quot;@flip/eslint-config&quot;: &quot;*&quot;</code></li>
<li>åˆ›å»ºé¡¹ç›®çš„<code>.eslintrc.js</code>ï¼Œç„¶å extends<code>@flip/eslint-config</code>æˆ–è€…å…·ä½“æŸä¸ªé…ç½®ï¼š<code>@flip/eslint-config/node</code>, <code>@flip/eslint-config/react</code></li>
<li>æ·»åŠ <code>tsconfig.json</code>ç»§æ‰¿ monorepo æ ¹ç›®å½•çš„é…ç½®ï¼Œåšå‡ºè‡ªå·±çš„ä¿®æ”¹</li>
<li>é…ç½®<code>.eslintrc.js parserOptions</code></li>
</ul>
<p>åˆ°è¿™é‡Œä¸€ä¸ªåŸºç¡€ç‰ˆçš„ monorepo å°±è®¾ç½®å®Œäº†ã€‚æ¥ä¸‹æ¥æœ‰ç©ºå¯èƒ½ä¼šå†™ä¸€äº› walkthroughs åŒ…æ‹¬åœ¨ monorepo é‡Œæ·»åŠ  react ç»„ä»¶é¡¹ç›®ï¼Œcra é¡¹ç›®ï¼Œnextjs é¡¹ç›®ä»¥åŠçº¯åç«¯é¡¹ç›®ã€‚</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/javascript-typescript-mono-repo/" class="post__tag__link">javascript, typescript, mono-repo</a></li></ul><a href="/2020/09/18/ts-mono-settings/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2020 Wan ChengCheng</div><menu class="page-menu u-fr"><li class="page-menu__item"><span title="Previous" class="page-menu__link icon-arrow-left page-menu__link--disabled"></span></li><li class="page-menu__item"><span title="Next" class="page-menu__link icon-arrow-right page-menu__link--disabled"></span></li></menu></footer></body></html>